<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JWT API –ö–≤–µ—Å—Ç</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f5f5f5;
            padding-top: 20px;
            padding-bottom: 40px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .container {
            max-width: 900px;
        }
        .card {
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.15);
        }
        .card-header {
            background-color: #4a6baf;
            color: white;
            font-weight: bold;
            border-radius: 8px 8px 0 0;
            padding: 12px 20px;
        }
        .api-result {
            background-color: #f8f9fa;
            border-radius: 5px;
            padding: 15px;
            max-height: 250px;
            overflow-y: auto;
            border: 1px solid #dee2e6;
        }
        .tutorial-card {
            border-left: 5px solid #4a6baf;
        }
        .tutorial-section {
            display: none;
        }
        .tutorial-section.active {
            display: block;
        }
        .step-indicator {
            margin-bottom: 30px;
        }
        .step-indicator .step {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #dee2e6;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin: 0 3px;
            font-weight: bold;
        }
        .step-indicator .step.active {
            background-color: #4a6baf;
            color: white;
        }
        .step-indicator .step.completed {
            background-color: #28a745;
            color: white;
        }
        .btn-primary {
            background-color: #4a6baf;
            border-color: #4a6baf;
        }
        .btn-primary:hover {
            background-color: #3a5a9f;
            border-color: #3a5a9f;
        }
        .btn-next {
            float: right;
        }
        .btn-prev {
            float: left;
        }
        .explanation {
            background-color: #e9f2ff;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            border-left: 5px solid #4a6baf;
        }
        .error-explanation {
            background-color: #fff0f0;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            border-left: 5px solid #dc3545;
            display: none;
        }
        .success-explanation {
            background-color: #f0fff0;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            border-left: 5px solid #28a745;
            display: none;
        }
        .flow-diagram {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            border: 1px dashed #4a6baf;
            text-align: center;
        }
        .flow-arrow {
            font-size: 24px;
            color: #4a6baf;
            margin: 10px 0;
        }
        .cookie-container {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 10px;
            margin-top: 20px;
            border: 1px dashed #6c757d;
        }
        .cookie-title {
            font-weight: bold;
            color: #495057;
        }
        .cookie-data {
            font-family: monospace;
            word-break: break-all;
        }
        .badge-section {
            margin-top: 30px;
            text-align: center;
        }
        .badge-item {
            display: inline-block;
            margin: 0 10px;
            text-align: center;
            opacity: 0.3;
            transition: all 0.3s ease;
        }
        .badge-item.earned {
            opacity: 1;
        }
        .badge-icon {
            font-size: 24px;
            margin-bottom: 5px;
        }
        .progress-bar-container {
            height: 10px;
            background-color: #e9ecef;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background-color: #4a6baf;
            width: 0%;
            transition: width 0.5s ease;
        }
        h3 {
            color: #3a5a9f;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-center mb-3">JWT API –ö–≤–µ—Å—Ç</h1>
        <p class="text-center text-muted mb-4">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–±–æ—Ç–µ —Å JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π</p>
        
        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        
        <div class="step-indicator text-center" id="stepIndicator">
            <!-- –®–∞–≥–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>

        <!-- –°–µ–∫—Ü–∏—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è -->
        <div class="tutorial-section active" id="step-1">
            <div class="card tutorial-card">
                <div class="card-header">–®–∞–≥ 1: –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π</div>
                <div class="card-body">
                    <h3>–ß—Ç–æ —Ç–∞–∫–æ–µ JWT?</h3>
                    <div class="explanation">
                        <p><strong>JWT (JSON Web Token)</strong> - —ç—Ç–æ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –∏ —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Å–ø–æ—Å–æ–± –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –º–µ–∂–¥—É —Å—Ç–æ—Ä–æ–Ω–∞–º–∏ –≤ –≤–∏–¥–µ JSON –æ–±—ä–µ–∫—Ç–∞.</p>
                        <p>JWT —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä—ë—Ö —á–∞—Å—Ç–µ–π:</p>
                        <ul>
                            <li><strong>–ó–∞–≥–æ–ª–æ–≤–æ–∫ (Header)</strong> - —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–∏–ø —Ç–æ–∫–µ–Ω–∞ –∏ –∞–ª–≥–æ—Ä–∏—Ç–º —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è</li>
                            <li><strong>–ü–æ–ª–µ–∑–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (Payload)</strong> - —Å–æ–¥–µ—Ä–∂–∏—Ç —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (claims) –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ</li>
                            <li><strong>–ü–æ–¥–ø–∏—Å—å (Signature)</strong> - –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö</li>
                        </ul>
                    </div>
                    
                    <h3>–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç JWT –≤ –Ω–∞—à–µ–º API?</h3>
                    <div class="flow-diagram">
                        <div class="row">
                            <div class="col-5">–ö–ª–∏–µ–Ω—Ç (–±—Ä–∞—É–∑–µ—Ä)</div>
                            <div class="col-2">‚Üí</div>
                            <div class="col-5">–°–µ—Ä–≤–µ—Ä (FastAPI)</div>
                        </div>
                        <div class="flow-arrow">‚¨á</div>
                        <div>1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</div>
                        <div class="flow-arrow">‚¨á</div>
                        <div>2. –í—Ö–æ–¥ (–ª–æ–≥–∏–Ω) –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –∫—É–∫–∏</div>
                        <div class="flow-arrow">‚¨á</div>
                        <div>3. –ó–∞–ø—Ä–æ—Å—ã –∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º —Å —Ç–æ–∫–µ–Ω–∞–º–∏</div>
                        <div class="flow-arrow">‚¨á</div>
                        <div>4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏</div>
                        <div class="flow-arrow">‚¨á</div>
                        <div>5. –í—ã—Ö–æ–¥ (—É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤)</div>
                    </div>
                    
                    <h3>–ß—Ç–æ –º—ã –±—É–¥–µ–º –∏–∑—É—á–∞—Ç—å?</h3>
                    <p>–í —ç—Ç–æ–º –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ –º—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–π–¥–µ–º –≤—Å–µ —ç—Ç–∞–ø—ã —Ä–∞–±–æ—Ç—ã —Å API:</p>
                    <ol>
                        <li>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</li>
                        <li>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</li>
                        <li>–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ</li>
                        <li>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è</li>
                        <li>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤</li>
                        <li>–í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã</li>
                    </ol>
                    
                    <div class="cookie-container">
                        <p class="cookie-title">–í –Ω–∞—à–µ–º API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 2 —Ç–æ–∫–µ–Ω–∞:</p>
                        <ul>
                            <li><strong>access_token</strong> - –∫–æ—Ä–æ—Ç–∫–æ–∂–∏–≤—É—â–∏–π —Ç–æ–∫–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ—Å—É—Ä—Å–∞–º (–æ–±—ã—á–Ω–æ 15-30 –º–∏–Ω—É—Ç)</li>
                            <li><strong>refresh_token</strong> - –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏–π —Ç–æ–∫–µ–Ω –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è access_token (–æ–±—ã—á–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π)</li>
                        </ul>
                    </div>
                    
                    <div class="mt-4">
                        <button class="btn btn-primary btn-next" onclick="nextStep()">–ù–∞—á–∞—Ç—å –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ ‚Üí</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°–µ–∫—Ü–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
        <div class="tutorial-section" id="step-2">
            <div class="card tutorial-card">
                <div class="card-header">–®–∞–≥ 2: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</div>
                <div class="card-body">
                    <h3>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
                    <div class="explanation">
                        <p><strong>POST /auth/register</strong> - —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º–µ.</p>
                        <p>–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</p>
                        <ul>
                            <li>–ü–∞—Ä–æ–ª—å —Ö–µ—à–∏—Ä—É–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é bcrypt (–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ)</li>
                            <li>–°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö</li>
                            <li>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–π –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</li>
                        </ul>
                    </div>
                    
                    <form id="registerForm" class="mb-4">
                        <div class="mb-3">
                            <label for="regEmail" class="form-label">Email:</label>
                            <input type="email" class="form-control" id="regEmail" required>
                        </div>
                        <div class="mb-3">
                            <label for="regPassword" class="form-label">–ü–∞—Ä–æ–ª—å:</label>
                            <input type="password" class="form-control" id="regPassword" required>
                            <div class="form-text">–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤.</div>
                        </div>
                        <button type="submit" class="btn btn-primary">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                    </form>
                    
                    <div class="api-result" id="registerResult"></div>
                    
                    <div class="error-explanation" id="registerError">
                        <h5>–ß—Ç–æ –º–æ–∂–µ—Ç –ø–æ–π—Ç–∏ –Ω–µ —Ç–∞–∫?</h5>
                        <ul>
                            <li><strong>409 Conflict</strong>: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç</li>
                            <li><strong>422 Unprocessable Entity</strong>: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç email –∏–ª–∏ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π –ø–∞—Ä–æ–ª—å</li>
                        </ul>
                        <p>–≠—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö.</p>
                    </div>
                    
                    <div class="success-explanation" id="registerSuccess">
                        <h5>–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ?</h5>
                        <ol>
                            <li>–ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ email</li>
                            <li>–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è —Å —Å–æ–ª—å—é</li>
                            <li>–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ users</li>
                            <li>–°–æ–∑–¥–∞–Ω–∏–µ –ø—É—Å—Ç–æ–π –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ profiles, —Å–≤—è–∑–∞–Ω–Ω–æ–π —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º</li>
                        </ol>
                        <p>–ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω, –Ω–æ –Ω–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω (—Ç–æ–∫–µ–Ω—ã –Ω–µ –≤—ã–¥–∞–Ω—ã).</p>
                    </div>
                    
                    <div class="flow-diagram">
                        <div><strong>–ü—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</strong></div>
                        <div>–ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç email –∏ –ø–∞—Ä–æ–ª—å</div>
                        <div class="flow-arrow">‚Üì</div>
                        <div>–°–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ –∑–∞–Ω—è—Ç –ª–∏ email</div>
                        <div class="flow-arrow">‚Üì</div>
                        <div>–ü–∞—Ä–æ–ª—å —Ö–µ—à–∏—Ä—É–µ—Ç—Å—è (bcrypt)</div>
                        <div class="flow-arrow">‚Üì</div>
                        <div>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î</div>
                        <div class="flow-arrow">‚Üì</div>
                        <div>–°–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</div>
                    </div>
                    
                    <div class="mt-4 clearfix">
                        <button class="btn btn-secondary btn-prev" onclick="prevStep()">‚Üê –ù–∞–∑–∞–¥</button>
                        <button class="btn btn-primary btn-next" id="registerNextBtn" onclick="nextStep()" disabled>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å ‚Üí</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°–µ–∫—Ü–∏—è –≤—Ö–æ–¥–∞ -->
        <div class="tutorial-section" id="step-3">
            <div class="card tutorial-card">
                <div class="card-header">–®–∞–≥ 3: –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</div>
                <div class="card-body">
                    <h3>–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
                    <div class="explanation">
                        <p><strong>POST /auth/login</strong> - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –≤—ã–¥–∞–µ—Ç JWT —Ç–æ–∫–µ–Ω—ã.</p>
                        <p>–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:</p>
                        <ul>
                            <li>–°–µ—Ä–≤–µ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–≤–∞ JWT —Ç–æ–∫–µ–Ω–∞: access –∏ refresh</li>
                            <li>–¢–æ–∫–µ–Ω—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –≤ httpOnly –∫—É–∫–∏</li>
                            <li>Access —Ç–æ–∫–µ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º</li>
                            <li>Refresh —Ç–æ–∫–µ–Ω –Ω—É–∂–µ–Ω –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è access —Ç–æ–∫–µ–Ω–∞, –∫–æ–≥–¥–∞ —Ç–æ—Ç –∏—Å—Ç–µ—á–µ—Ç</li>
                        </ul>
                    </div>
                    
                    <form id="loginForm" class="mb-4">
                        <div class="mb-3">
                            <label for="loginEmail" class="form-label">Email:</label>
                            <input type="email" class="form-control" id="loginEmail" required>
                        </div>
                        <div class="mb-3">
                            <label for="loginPassword" class="form-label">–ü–∞—Ä–æ–ª—å:</label>
                            <input type="password" class="form-control" id="loginPassword" required>
                        </div>
                        <button type="submit" class="btn btn-primary">–í–æ–π—Ç–∏</button>
                    </form>
                    
                    <div class="api-result" id="loginResult"></div>
                    
                    <div class="error-explanation" id="loginError">
                        <h5>–ß—Ç–æ –º–æ–∂–µ—Ç –ø–æ–π—Ç–∏ –Ω–µ —Ç–∞–∫?</h5>
                        <ul>
                            <li><strong>401 Unauthorized</strong>: –ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å</li>
                            <li><strong>422 Unprocessable Entity</strong>: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –≤ –∑–∞–ø—Ä–æ—Å–µ</li>
                        </ul>
                        <p>–°–µ—Ä–≤–µ—Ä –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω–µ–≤–µ—Ä–Ω–æ (email –∏–ª–∏ –ø–∞—Ä–æ–ª—å) - —ç—Ç–æ –º–µ—Ä–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.</p>
                    </div>
                    
                    <div class="success-explanation" id="loginSuccess">
                        <h5>–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ?</h5>
                        <ol>
                            <li>–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ email –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö</li>
                            <li>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ö–µ—à–∞ –≤–≤–µ–¥–µ–Ω–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è —Å —Ö–µ—à–µ–º –∏–∑ –±–∞–∑—ã</li>
                            <li>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è access —Ç–æ–∫–µ–Ω–∞ (—Å—Ä–æ–∫ –∂–∏–∑–Ω–∏ - –º–∏–Ω—É—Ç—ã)</li>
                            <li>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è refresh —Ç–æ–∫–µ–Ω–∞ (—Å—Ä–æ–∫ –∂–∏–∑–Ω–∏ - –¥–Ω–∏)</li>
                            <li>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –≤ httpOnly –∫—É–∫–∏</li>
                        </ol>
                        <p>–¢–µ–ø–µ—Ä—å –≤—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –∏ –º–æ–∂–µ—Ç–µ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º!</p>
                    </div>
                    
                    <div class="cookie-container">
                        <p class="cookie-title">–í –∫—É–∫–∞—Ö –≤–∞—à–µ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞ —Å–µ–π—á–∞—Å:</p>
                        <div class="row">
                            <div class="col-md-6">
                                <p><strong>access_token</strong></p>
                                <p class="cookie-data" id="accessTokenPreview">–ù–µ—Ç —Ç–æ–∫–µ–Ω–∞</p>
                            </div>
                            <div class="col-md-6">
                                <p><strong>refresh_token</strong></p>
                                <p class="cookie-data" id="refreshTokenPreview">–ù–µ—Ç —Ç–æ–∫–µ–Ω–∞</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flow-diagram">
                        <div><strong>–ü—Ä–æ—Ü–µ—Å—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:</strong></div>
                        <div>–ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç email –∏ –ø–∞—Ä–æ–ª—å</div>
                        <div class="flow-arrow">‚Üì</div>
                        <div>–°–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</div>
                        <div class="flow-arrow">‚Üì</div>
                        <div>–ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è JWT —Ç–æ–∫–µ–Ω—ã</div>
                        <div class="flow-arrow">‚Üì</div>
                        <div>–¢–æ–∫–µ–Ω—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –≤ –∫—É–∫–∏</div>
                        <div class="flow-arrow">‚Üì</div>
                        <div>–ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç –æ–± —É—Å–ø–µ—Ö–µ</div>
                    </div>
                    
                    <div class="mt-4 clearfix">
                        <button class="btn btn-secondary btn-prev" onclick="prevStep()">‚Üê –ù–∞–∑–∞–¥</button>
                        <button class="btn btn-primary btn-next" id="loginNextBtn" onclick="nextStep()" disabled>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å ‚Üí</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°–µ–∫—Ü–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
        <div class="tutorial-section" id="step-4">
            <div class="card tutorial-card">
                <div class="card-header">–®–∞–≥ 4: –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ</div>
                <div class="card-body">
                    <h3>–î–æ—Å—Ç—É–ø –∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º</h3>
                    <div class="explanation">
                        <p><strong>GET /me</strong> - –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ.</p>
                        <p>–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–º—É —ç–Ω–¥–ø–æ–∏–Ω—Ç—É:</p>
                        <ul>
                            <li>–ö–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å —Å access_token –≤ –∫—É–∫–∞—Ö</li>
                            <li>–°–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞</li>
                            <li>–ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –≤–∞–ª–∏–¥–µ–Ω, —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</li>
                        </ul>
                    </div>
                    
                    <div class="d-grid gap-2 mb-4">
                        <button id="getMeBtn" class="btn btn-primary">–ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ</button>
                    </div>
                    
                    <div class="api-result" id="getMeResult"></div>
                    
                    <div class="error-explanation" id="getMeError">
                        <h5>–ß—Ç–æ –º–æ–∂–µ—Ç –ø–æ–π—Ç–∏ –Ω–µ —Ç–∞–∫?</h5>
                        <ul>
                            <li><strong>401 Unauthorized</strong>: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω access —Ç–æ–∫–µ–Ω</li>
                            <li><strong>403 Forbidden</strong>: –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤</li>
                        </ul>
                        <p>–ï—Å–ª–∏ access —Ç–æ–∫–µ–Ω –∏—Å—Ç–µ–∫, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä—É—á–∫—É <code>/auth/refresh</code> –¥–ª—è –µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.</p>
                    </div>
                    
                    <div class="success-explanation" id="getMeSuccess">
                        <h5>–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ?</h5>
                        <ol>
                            <li>–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ access —Ç–æ–∫–µ–Ω–∞ –∏–∑ –∫—É–∫–∏</li>
                            <li>–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ —Ç–æ–∫–µ–Ω–∞ –ø—É–±–ª–∏—á–Ω—ã–º –∫–ª—é—á–æ–º</li>
                            <li>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è —Ç–æ–∫–µ–Ω–∞</li>
                            <li>–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (sub) –∏–∑ —Ç–æ–∫–µ–Ω–∞</li>
                            <li>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è –∏–∑ –±–∞–∑—ã</li>
                            <li>–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ JSON –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–ª–∏–µ–Ω—Ç—É</li>
                        </ol>
                        <p>–í –æ—Ç–≤–µ—Ç–µ –≤—ã –≤–∏–¥–∏—Ç–µ –∫–∞–∫ –±–∞–∑–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Ç–∞–∫ –∏ –µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—å!</p>
                    </div>
                    
                    <div class="flow-diagram">
                        <div><strong>–ü—Ä–æ—Ü–µ—Å—Å –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:</strong></div>
                        <div>–ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å —Å –∫—É–∫–∞–º–∏</div>
                        <div class="flow-arrow">‚Üì</div>
                        <div>Middleware –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω</div>
                        <div class="flow-arrow">‚Üì</div>
                        <div>–ò–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Ç–æ–∫–µ–Ω–∞</div>
                        <div class="flow-arrow">‚Üì</div>
                        <div>–ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ë–î</div>
                        <div class="flow-arrow">‚Üì</div>
                        <div>–î–∞–Ω–Ω—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É</div>
                    </div>
                    
                    <div class="mt-4 clearfix">
                        <button class="btn btn-secondary btn-prev" onclick="prevStep()">‚Üê –ù–∞–∑–∞–¥</button>
                        <button class="btn btn-primary btn-next" id="getMeNextBtn" onclick="nextStep()" disabled>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å ‚Üí</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°–µ–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è -->
        <div class="tutorial-section" id="step-5">
            <div class="card tutorial-card">
                <div class="card-header">–®–∞–≥ 5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è</div>
                <div class="card-body">
                    <h3>–ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
                    <div class="explanation">
                        <p><strong>PATCH /me</strong> - –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.</p>
                        <p>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:</p>
                        <ul>
                            <li>–¢—Ä–µ–±—É–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤—É—é—â–∏–π access —Ç–æ–∫–µ–Ω</li>
                            <li>–ú–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–∞–∫ –≤—Å–µ –ø–æ–ª—è, —Ç–∞–∫ –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ</li>
                            <li>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</li>
                        </ul>
                    </div>
                    
                    <form id="updateProfileForm" class="mb-4">
                        <div class="mb-3">
                            <label for="username" class="form-label">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
                            <input type="text" class="form-control" id="username">
                        </div>
                        <div class="mb-3">
                            <label for="bio" class="form-label">–ë–∏–æ–≥—Ä–∞—Ñ–∏—è:</label>
                            <textarea class="form-control" id="bio" rows="2"></textarea>
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="is_active">
                            <label class="form-check-label" for="is_active">–ê–∫—Ç–∏–≤–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç</label>
                        </div>
                        <div class="mb-3">
                            <label for="birthday" class="form-label">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</label>
                            <input type="date" class="form-control" id="birthday">
                        </div>
                        <div class="mb-3">
                            <label for="phone_number" class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω:</label>
                            <input type="tel" class="form-control" id="phone_number">
                        </div>
                        <button type="submit" class="btn btn-primary">–û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
                    </form>
                    
                    <div class="api-result" id="updateProfileResult"></div>
                    
                    <div class="error-explanation" id="updateProfileError">
                        <h5>–ß—Ç–æ –º–æ–∂–µ—Ç –ø–æ–π—Ç–∏ –Ω–µ —Ç–∞–∫?</h5>
                        <ul>
                            <li><strong>401 Unauthorized</strong>: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω —Ç–æ–∫–µ–Ω</li>
                            <li><strong>422 Unprocessable Entity</strong>: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö</li>
                            <li><strong>409 Conflict</strong>: –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∂–µ –∑–∞–Ω—è—Ç–æ</li>
                        </ul>
                    </div>
                    
                    <div class="success-explanation" id="updateProfileSuccess">
                        <h5>–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ?</h5>
                        <ol>
                            <li>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</li>
                            <li>–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</li>
                            <li>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –ø–æ–ª–µ–π (–æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)</li>
                            <li>–í–æ–∑–≤—Ä–∞—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</li>
                        </ol>
                        <p>–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Ñ–∏–ª—å, –∞ –Ω–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (email, –ø–∞—Ä–æ–ª—å).</p>
                    </div>
                    
                    <div class="flow-diagram">
                        <div><strong>–ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è:</strong></div>
                        <div>–ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</div>
                        <div class="flow-arrow">‚Üì</div>
                        <div>–°–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞</div>
                        <div class="flow-arrow">‚Üì</div>
                        <div>–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</div>
                        <div class="flow-arrow">‚Üì</div>
                        <div>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ø—Ä–æ—Ñ–∏–ª—è –≤ –ë–î</div>
                        <div class="flow-arrow">‚Üì</div>
                        <div>–í–æ–∑–≤—Ä–∞—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç—É</div>
                    </div>
                    
                    <div class="mt-4 clearfix">
                        <button class="btn btn-secondary btn-prev" onclick="prevStep()">‚Üê –ù–∞–∑–∞–¥</button>
                        <button class="btn btn-primary btn-next" id="updateProfileNextBtn" onclick="nextStep()" disabled>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å ‚Üí</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°–µ–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ -->
        <div class="tutorial-section" id="step-6">
            <div class="card tutorial-card">
                <div class="card-header">–®–∞–≥ 6: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞</div>
                <div class="card-body">
                    <h3>–†–∞–±–æ—Ç–∞ —Å refresh —Ç–æ–∫–µ–Ω–æ–º</h3>
                    <div class="explanation">
                        <p><strong>POST /auth/refresh</strong> - –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏—Å—Ç–µ–∫—à–∏–π access —Ç–æ–∫–µ–Ω —Å –ø–æ–º–æ—â—å—é refresh —Ç–æ–∫–µ–Ω–∞.</p>
                        <p>–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:</p>
                        <ul>
                            <li>Access —Ç–æ–∫–µ–Ω –∏–º–µ–µ—Ç –∫–æ—Ä–æ—Ç–∫–∏–π —Å—Ä–æ–∫ –∂–∏–∑–Ω–∏ (–æ–±—ã—á–Ω–æ 15-30 –º–∏–Ω—É—Ç)</li>
                            <li>–ö–æ–≥–¥–∞ –æ–Ω –∏—Å—Ç–µ–∫–∞–µ—Ç, –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –æ—à–∏–±–∫—É 401</li>
                            <li>–í–º–µ—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—Ö–æ–¥–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å refresh —Ç–æ–∫–µ–Ω –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ access —Ç–æ–∫–µ–Ω–∞</li>
                        </ul>
                    </div>
                    
                    <div class="d-grid gap-2 mb-4">
                        <button id="refreshBtn" class="btn btn-primary">–û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω—ã</button>
                    </div>
                    
                    <div class="api-result" id="refreshResult"></div>
                    
                    <div class="error-explanation" id="refreshError">
                        <h5>–ß—Ç–æ –º–æ–∂–µ—Ç –ø–æ–π—Ç–∏ –Ω–µ —Ç–∞–∫?</h5>
                        <ul>
                            <li><strong>401 Unauthorized</strong>: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω refresh —Ç–æ–∫–µ–Ω</li>
                            <li><strong>403 Forbidden</strong>: Refresh —Ç–æ–∫–µ–Ω –∏—Å—Ç–µ–∫ –∏–ª–∏ –±—ã–ª –æ—Ç–æ–∑–≤–∞–Ω</li>
                        </ul>
                        <p>–ï—Å–ª–∏ refresh —Ç–æ–∫–µ–Ω –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∏–¥–µ—Ç—Å—è –≤–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ.</p>
                    </div>
                    
                    <div class="success-explanation" id="refreshSuccess">
                        <h5>–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ?</h5>
                        <ol>
                            <li>–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ refresh —Ç–æ–∫–µ–Ω–∞ –∏–∑ –∫—É–∫–∏</li>
                            <li>–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ –∏ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è —Ç–æ–∫–µ–Ω–∞</li>
                            <li>–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Ç–æ–∫–µ–Ω–∞</li>
                            <li>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ access —Ç–æ–∫–µ–Ω–∞</li>
                            <li>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ –≤ –∫—É–∫–∏</li>
                        </ol>
                        <p>–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–∞–∫–∂–µ –æ–±–Ω–æ–≤–ª—è—é—Ç –∏ —Å–∞–º refresh —Ç–æ–∫–µ–Ω (—Ä–æ—Ç–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤) –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.</p>
                    </div>
                    
                    <div class="cookie-container">
                        <p class="cookie-title">–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤:</p>
                        <div class="row">
                            <div class="col-md-6">
                                <p><strong>–°—Ç–∞—Ä—ã–π access_token</strong></p>
                                <p class="cookie-data" id="oldAccessToken">–ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω</p>
                            </div>
                            <div class="col-md-6">
                                <p><strong>–ù–æ–≤—ã–π access_token</strong></p>
                                <p class="cookie-data" id="newAccessToken">–ï—â–µ –Ω–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flow-diagram">
                        <div><strong>–ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤:</strong></div>
                        <div>–ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å —Å refresh —Ç–æ–∫–µ–Ω–æ–º</div>
                        <div class="flow-arrow">‚Üì</div>
                        <div>–°–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç refresh —Ç–æ–∫–µ–Ω</div>
                        <div class="flow-arrow">‚Üì</div>
                        <div>–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–æ–≤—ã–π access —Ç–æ–∫–µ–Ω</div>
                        <div class="flow-arrow">‚Üì</div>
                        <div>–ù–æ–≤—ã–π —Ç–æ–∫–µ–Ω —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ –∫—É–∫–∏</div>
                        <div class="flow-arrow">‚Üì</div>
                        <div>–ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç –æ–± —É—Å–ø–µ—Ö–µ</div>
                    </div>
                    
                    <div class="mt-4 clearfix">
                        <button class="btn btn-secondary btn-prev" onclick="prevStep()">‚Üê –ù–∞–∑–∞–¥</button>
                        <button class="btn btn-primary btn-next" id="refreshNextBtn" onclick="nextStep()" disabled>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å ‚Üí</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°–µ–∫—Ü–∏—è –≤—ã—Ö–æ–¥–∞ -->
        <div class="tutorial-section" id="step-7">
            <div class="card tutorial-card">
                <div class="card-header">–®–∞–≥ 7: –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã</div>
                <div class="card-body">
                    <h3>–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏</h3>
                    <div class="explanation">
                        <p><strong>POST /auth/logout</strong> - –≤—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã, —É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤.</p>
                        <p>–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ:</p>
                        <ul>
                            <li>–£–¥–∞–ª—è—é—Ç—Å—è –∫—É–∫–∏ —Å —Ç–æ–∫–µ–Ω–∞–º–∏</li>
                            <li>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–æ–ª—å—à–µ –Ω–µ –º–æ–∂–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º</li>
                        </ul>
                    </div>
                    
                    <div class="d-grid gap-2 mb-4">
                        <button id="logoutBtn" class="btn btn-danger">–í—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã</button>
                    </div>
                    
                    <div class="api-result" id="logoutResult"></div>
                    
                    <div class="error-explanation" id="logoutError">
                        <h5>–ß—Ç–æ –º–æ–∂–µ—Ç –ø–æ–π—Ç–∏ –Ω–µ —Ç–∞–∫?</h5>
                        <ul>
                            <li>–û—à–∏–±–∫–∏ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è —Ä–µ–¥–∫–æ</li>
                            <li>–î–∞–∂–µ –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–µ –¥–æ–π–¥–µ—Ç –¥–æ —Å–µ—Ä–≤–µ—Ä–∞, –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —É–¥–∞–ª–∏—Ç—å –∫—É–∫–∏</li>
                        </ul>
                    </div>
                    
                    <div class="success-explanation" id="logoutSuccess">
                        <h5>–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ?</h5>
                        <ol>
                            <li>–£–¥–∞–ª–µ–Ω–∏–µ –∫—É–∫–∏ access_token</li>
                            <li>–£–¥–∞–ª–µ–Ω–∏–µ –∫—É–∫–∏ refresh_token</li>
                        </ol>
                        <p>–í –±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è—Ö —Ç–∞–∫–∂–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ refresh —Ç–æ–∫–µ–Ω–∞ –≤ —á–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –µ–≥–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.</p>
                    </div>
                    
                    <div class="cookie-container">
                        <p class="cookie-title">–°–æ—Å—Ç–æ—è–Ω–∏–µ –∫—É–∫–æ–≤ –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞:</p>
                        <div id="cookiesAfterLogout">
                            <p>–û–±–µ –∫—É–∫–∏ (access_token –∏ refresh_token) –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–¥–∞–ª–µ–Ω—ã.</p>
                        </div>
                    </div>
                    
                    <div class="flow-diagram">
                        <div><strong>–ü—Ä–æ—Ü–µ—Å—Å –≤—ã—Ö–æ–¥–∞:</strong></div>
                        <div>–ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã—Ö–æ–¥</div>
                        <div class="flow-arrow">‚Üì</div>
                        <div>–°–µ—Ä–≤–µ—Ä —É–¥–∞–ª—è–µ—Ç –∫—É–∫–∏ —Å —Ç–æ–∫–µ–Ω–∞–º–∏</div>
                        <div class="flow-arrow">‚Üì</div>
                        <div>–ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç –æ–± —É—Å–ø–µ—Ö–µ</div>
                        <div class="flow-arrow">‚Üì</div>
                        <div>–ë—Ä–∞—É–∑–µ—Ä —É–¥–∞–ª—è–µ—Ç –∫—É–∫–∏ —Å —Ç–æ–∫–µ–Ω–∞–º–∏</div>
                    </div>
                    
                    <div class="mt-4 clearfix">
                        <button class="btn btn-secondary btn-prev" onclick="prevStep()">‚Üê –ù–∞–∑–∞–¥</button>
                        <button class="btn btn-primary btn-next" id="logoutNextBtn" onclick="nextStep()" disabled>–ó–∞–≤–µ—Ä—à–∏—Ç—å ‚Üí</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°–µ–∫—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è -->
        <div class="tutorial-section" id="step-8">
            <div class="card tutorial-card">
                <div class="card-header">–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏ –∫–≤–µ—Å—Ç</div>
                <div class="card-body">
                    <h3 class="text-center mb-4">–í—ã –æ—Å–≤–æ–∏–ª–∏ JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é!</h3>
                    
                    <div class="text-center mb-4">
                        <span class="display-1">üèÜ</span>
                    </div>
                    
                    <div class="explanation">
                        <p>–í —ç—Ç–æ–º –∫–≤–µ—Å—Ç–µ –≤—ã –∏–∑—É—á–∏–ª–∏:</p>
                        <ul>
                            <li>–ë–∞–∑–æ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã JWT</li>
                            <li>–ü—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏</li>
                            <li>–î–æ—Å—Ç—É–ø –∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º</li>
                            <li>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</li>
                            <li>–†–∞–±–æ—Ç—É —Å refresh —Ç–æ–∫–µ–Ω–∞–º–∏</li>
                            <li>–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã</li>
                        </ul>
                    </div>
                    
                    <div class="badge-section">
                        <h4 class="mb-3">–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:</h4>
                        <div class="row justify-content-center">
                            <div class="col-4 col-md-2 badge-item" id="badge-register">
                                <div class="badge-icon">üë§</div>
                                <div>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</div>
                            </div>
                            <div class="col-4 col-md-2 badge-item" id="badge-login">
                                <div class="badge-icon">üîë</div>
                                <div>–í—Ö–æ–¥</div>
                            </div>
                            <div class="col-4 col-md-2 badge-item" id="badge-profile">
                                <div class="badge-icon">üìù</div>
                                <div>–ü—Ä–æ—Ñ–∏–ª—å</div>
                            </div>
                            <div class="col-4 col-md-2 badge-item" id="badge-update">
                                <div class="badge-icon">‚úèÔ∏è</div>
                                <div>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ</div>
                            </div>
                            <div class="col-4 col-md-2 badge-item" id="badge-refresh">
                                <div class="badge-icon">üîÑ</div>
                                <div>–¢–æ–∫–µ–Ω—ã</div>
                            </div>
                            <div class="col-4 col-md-2 badge-item" id="badge-logout">
                                <div class="badge-icon">üö™</div>
                                <div>–í—ã—Ö–æ–¥</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-center mt-5">
                        <button class="btn btn-lg btn-primary" onclick="resetQuest()">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
                    </div>
                </div>
            </div>
        </div>
        
    </div>

    <!-- Bootstrap –∏ JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // –ë–∞–∑–æ–≤—ã–π URL –¥–ª—è API
        const API_URL = 'http://127.0.0.1:8000';
        
        // –¢–µ–∫—É—â–∏–π —à–∞–≥
        let currentStep = 1;
        const totalSteps = 8;
        
        // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        const badges = {
            register: false,
            login: false,
            profile: false,
            update: false,
            refresh: false,
            logout: false
        };
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ —à–∞–≥–æ–≤
        function initStepIndicators() {
            const container = document.getElementById('stepIndicator');
            container.innerHTML = '';
            
            for (let i = 1; i <= totalSteps; i++) {
                const step = document.createElement('div');
                step.className = `step ${i === currentStep ? 'active' : ''}`;
                step.innerText = i;
                container.appendChild(step);
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ —à–∞–≥–æ–≤
        function updateStepIndicators() {
            const steps = document.querySelectorAll('.step');
            steps.forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index + 1 === currentStep) {
                    step.classList.add('active');
                } else if (index + 1 < currentStep) {
                    step.classList.add('completed');
                }
            });
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞
            const progress = ((currentStep - 1) / (totalSteps - 1)) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
        }
        
        // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É
        function nextStep() {
            if (currentStep < totalSteps) {
                document.getElementById(`step-${currentStep}`).classList.remove('active');
                currentStep++;
                document.getElementById(`step-${currentStep}`).classList.add('active');
                updateStepIndicators();
                window.scrollTo(0, 0);
            }
        }
        
        // –ü–µ—Ä–µ—Ö–æ–¥ –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É —à–∞–≥—É
        function prevStep() {
            if (currentStep > 1) {
                document.getElementById(`step-${currentStep}`).classList.remove('active');
                currentStep--;
                document.getElementById(`step-${currentStep}`).classList.add('active');
                updateStepIndicators();
                window.scrollTo(0, 0);
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ
        function showResult(elementId, data, success = true) {
            const element = document.getElementById(elementId);
            element.classList.remove('text-danger', 'text-success');
            element.classList.add(success ? 'text-success' : 'text-danger');
            
            if (typeof data === 'object') {
                element.innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
            } else {
                element.textContent = data;
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–±—ä—è—Å–Ω–µ–Ω–∏–π
        function showExplanation(baseId, success = true) {
            document.getElementById(`${baseId}Error`).style.display = success ? 'none' : 'block';
            document.getElementById(`${baseId}Success`).style.display = success ? 'block' : 'none';
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É
        function enableNextStep(buttonId) {
            document.getElementById(buttonId).disabled = false;
        }
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (–∏–º–∏—Ç–∞—Ü–∏—è)
        function updateTokenPreview(isLogin = true) {
            const accessTokenEl = document.getElementById('accessTokenPreview');
            const refreshTokenEl = document.getElementById('refreshTokenPreview');
            
            if (isLogin) {
                accessTokenEl.textContent = 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyX2lkIiwiZXhwIjoxNjMzMjMyNDAwfQ...';
                refreshTokenEl.textContent = 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyX2lkIiwiZXhwIjoxNjM0NDMyNDAwfQ...';
            } else {
                accessTokenEl.textContent = '–ù–µ—Ç —Ç–æ–∫–µ–Ω–∞';
                refreshTokenEl.textContent = '–ù–µ—Ç —Ç–æ–∫–µ–Ω–∞';
            }
        }
        
        // –û–±–Ω–æ–≤–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        function updateBadges() {
            Object.keys(badges).forEach(badge => {
                const element = document.getElementById(`badge-${badge}`);
                if (badges[badge] && element) {
                    element.classList.add('earned');
                }
            });
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
        async function makeRequest(url, method, body = null) {
            try {
                const options = {
                    method,
                    headers: body ? { 'Content-Type': 'application/json' } : {},
                    credentials: 'include' // –í–∞–∂–Ω–æ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∫—É–∫–∏
                };
                
                if (body) {
                    options.body = JSON.stringify(body);
                }
                
                const response = await fetch(`${API_URL}${url}`, options);
                let data;
                
                try {
                    data = await response.json();
                } catch {
                    data = {};
                }
                
                if (!response.ok) {
                    throw new Error(data.detail || `–û—à–∏–±–∫–∞ ${response.status}: ${response.statusText}`);
                }
                
                return { success: true, data, status: response.status };
            } catch (error) {
                return { success: false, error: error.message, status: error.status || 500 };
            }
        }
        
        // –°–±—Ä–æ—Å –∫–≤–µ—Å—Ç–∞
        function resetQuest() {
            currentStep = 1;
            Object.keys(badges).forEach(key => badges[key] = false);
            
            // –°–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö —Å–µ–∫—Ü–∏–π
            document.querySelectorAll('.tutorial-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑ –ø–µ—Ä–≤–æ–π —Å–µ–∫—Ü–∏–∏
            document.getElementById('step-1').classList.add('active');
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
            updateStepIndicators();
            updateBadges();
            
            // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–æ–∫ –ø–µ—Ä–µ—Ö–æ–¥–∞
            document.getElementById('registerNextBtn').disabled = true;
            document.getElementById('loginNextBtn').disabled = true;
            document.getElementById('getMeNextBtn').disabled = true;
            document.getElementById('updateProfileNextBtn').disabled = true;
            document.getElementById('refreshNextBtn').disabled = true;
            document.getElementById('logoutNextBtn').disabled = true;
            
            // –û—á–∏—Å—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            document.querySelectorAll('.api-result').forEach(result => {
                result.innerHTML = '';
            });
            
            // –°–∫—Ä—ã—Ç–∏–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–π
            document.querySelectorAll('.error-explanation, .success-explanation').forEach(explanation => {
                explanation.style.display = 'none';
            });
            
            // –°–±—Ä–æ—Å —Ç–æ–∫–µ–Ω–æ–≤
            updateTokenPreview(false);
            
            window.scrollTo(0, 0);
        }
        
        // ===== –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π =====
        
        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
        document.getElementById('registerForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const email = document.getElementById('regEmail').value;
            const password = document.getElementById('regPassword').value;
            
            const result = await makeRequest('/auth/register', 'POST', { email, password });
            
            if (result.success) {
                showResult('registerResult', '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ!', true);
                showExplanation('register', true);
                enableNextStep('registerNextBtn');
                badges.register = true;
                updateBadges();
            } else {
                showResult('registerResult', `–û—à–∏–±–∫–∞: ${result.error}`, false);
                showExplanation('register', false);
            }
        });
        
        // –í—Ö–æ–¥
        document.getElementById('loginForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            const result = await makeRequest('/auth/login', 'POST', { email, password });
            
            if (result.success) {
                showResult('loginResult', '–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!', true);
                showExplanation('login', true);
                updateTokenPreview(true);
                enableNextStep('loginNextBtn');
                badges.login = true;
                updateBadges();
            } else {
                showResult('loginResult', `–û—à–∏–±–∫–∞: ${result.error}`, false);
                showExplanation('login', false);
                updateTokenPreview(false);
            }
        });
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        document.getElementById('getMeBtn').addEventListener('click', async function() {
            const result = await makeRequest('/me', 'GET');
            
            if (result.success) {
                showResult('getMeResult', result.data, true);
                showExplanation('getMe', true);
                enableNextStep('getMeNextBtn');
                badges.profile = true;
                updateBadges();
            } else {
                showResult('getMeResult', `–û—à–∏–±–∫–∞: ${result.error}`, false);
                showExplanation('getMe', false);
            }
        });
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
        document.getElementById('updateProfileForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const profileData = {
                username: document.getElementById('username').value || null,
                bio: document.getElementById('bio').value || null,
                is_active: document.getElementById('is_active').checked,
                birthday: document.getElementById('birthday').value || null,
                phone_number: document.getElementById('phone_number').value || null
            };
            
            const result = await makeRequest('/me', 'PATCH', profileData);
            
            if (result.success) {
                showResult('updateProfileResult', result.data, true);
                showExplanation('updateProfile', true);
                enableNextStep('updateProfileNextBtn');
                badges.update = true;
                updateBadges();
            } else {
                showResult('updateProfileResult', `–û—à–∏–±–∫–∞: ${result.error}`, false);
                showExplanation('updateProfile', false);
            }
        });
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
        document.getElementById('refreshBtn').addEventListener('click', async function() {
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ç–∞—Ä—ã–π —Ç–æ–∫–µ–Ω –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
            document.getElementById('oldAccessToken').textContent = document.getElementById('accessTokenPreview').textContent;
            
            const result = await makeRequest('/auth/refresh', 'POST');
            
            if (result.success) {
                showResult('refreshResult', '–¢–æ–∫–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã', true);
                showExplanation('refresh', true);
                document.getElementById('newAccessToken').textContent = 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyX2lkIiwiZXhwIjoxNjMzMjQyNDAwfQ...';
                document.getElementById('accessTokenPreview').textContent = document.getElementById('newAccessToken').textContent;
                enableNextStep('refreshNextBtn');
                badges.refresh = true;
                updateBadges();
            } else {
                showResult('refreshResult', `–û—à–∏–±–∫–∞: ${result.error}`, false);
                showExplanation('refresh', false);
                document.getElementById('newAccessToken').textContent = '–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è';
            }
        });
        
        // –í—ã—Ö–æ–¥
        document.getElementById('logoutBtn').addEventListener('click', async function() {
            const result = await makeRequest('/auth/logout', 'POST');
            
            if (result.success) {
                showResult('logoutResult', '–í—ã —É—Å–ø–µ—à–Ω–æ –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã', true);
                showExplanation('logout', true);
                document.getElementById('cookiesAfterLogout').innerHTML = '<div class="alert alert-success">–¢–æ–∫–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω—ã!</div>';
                updateTokenPreview(false);
                enableNextStep('logoutNextBtn');
                badges.logout = true;
                updateBadges();
            } else {
                showResult('logoutResult', `–û—à–∏–±–∫–∞: ${result.error}`, false);
                showExplanation('logout', false);
                document.getElementById('cookiesAfterLogout').innerHTML = '<div class="alert alert-danger">–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤!</div>';
            }
        });
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            initStepIndicators();
            updateStepIndicators();
        });
    </script>
</body>
</html>